<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link href='../../../../sailing-fontface-1.0.cache.css' media='screen' rel='stylesheet' title='Default stylesheet' type='text/css' />
    <link href='../../../main.css' media='screen' rel='stylesheet' title='Default stylesheet' type='text/css' />
    <link rel='icon' href='../../../../sap.ico' type='image/x-icon'>
    <title>SAP Sailing Analytics Webservices API Version 1.0</title>
</head>
<body>
<h1>SAP Sailing Analytics Webservices API Version 1.0</h1>
<h2>URL: /api/v1/regattas/{regattaname}/competitors/createandadd</h2>

<b>Description:</b>
<p>Creates a new competitor and registers it with the regatta. Competitor creation can be controlled by a number of
parameter; defaults will be obtained from the authenticated user invoking the service.<br/>
This provides functionality <li> for the regatta owner (or any user with update permission on the regatta) to add new
competitors to the regatta <li> and for any user (inclusive anonymous) to register himself to an regatta that is 
explicitly open for self-registrations. In this case a deviceUuid is required to immediately checkin the device.<br>
User self-registration is restricted to allow only one registration per device. Also a secret is required to make sure
that the regatta to register on is correctly referenced.
All slashes contained within the {regattaname} parameter must be replaced by "__" (double underscore).</p>
<br/>
<table>
    <tr>
        <td>Webservice Type:</td>
        <td>POST</td>
    </tr>
    <tr>
        <td>Output format:</td>
        <td>The competitor as a JSON document</td>
    </tr>
    <tr>
        <td>Mandatory parameters:</td>
        <td>boatclass the name of the competitor's boat class</td>
    </tr>
    <tr>
        <td>Additional mandatory parameters for user self-registrations on open regattas:</td>
        <td>
            <div>deviceUuid the Uuid of the device used for self registration</div>
            <div>secret secret string required for self registration validation purpose</div>
            <div>competitorName the name to use for the newly created/added competitor (if a user is authenticated,
            this becomes optional if no competitorName is provided in this case, the name of the users is used for the
            competitor name)</div>
        </td>
    <tr>
        <td>Optional parameters:</td>
        <td>
            <div>sailid the sail number to use</div>
            <div>nationalityIOC three-letter IOC country code</div>
            <div>timeontimefactor a double value telling the ToT / TMF / time-on-time factor for handicap racing</div>
            <div>timeondistanceallowancepernauticalmileasmillis distance-based allowance in milliseconds for handicap racing (ToD)</div>
            <div>searchtag a search tag for the competitor</div>
            <div>competitorEmail the email to use for the newly created/added competitor</div>
        </td>
    </tr>
    <tr>
        <td>Request method:</td>
        <td>POST</td>
    </tr>
    <tr>
        <td>Example for adding new comeptitor:</td>
        <td>curl -X POST -H "Authorization: Bearer KMTuXevrA0CYyM6O1W2E0QB9gVeP8tIpgjafJOvj/6A=" "http://127.0.0.1:8888/sailingserver/api/v1/regattas/Smartphone%20Tracking%20Test%2022.06/competitors/createandadd?boatclass=49er&sailid=GER+123&nationalityIOC=GER&competitorName=Firstname%20Lastname"</td>
    </tr>
    <tr>
        <td>Examples for user self registration:</td>
        <td>curl -X POST -H "Authorization: Bearer KMTuXevrA0CYyM6O1W2E0QB9gVeP8tIpgjafJOvj/6A=" "http://127.0.0.1:8888/sailingserver/api/v1/regattas/Smartphone%20Tracking%20Test%2022.06/competitors/createandadd?boatclass=49er&sailid=GER+123&nationalityIOC=GER&secret=KFJHKH265kJH724KJHKH2374567&deviceUuid=00000000-1111-2222-3333-444444444444"<br/>
        curl -X POST "http://127.0.0.1:8888/sailingserver/api/v1/regattas/Smartphone%20Tracking%20Test%2022.06/competitors/createandadd?boatclass=49er&sailid=GER+123&nationalityIOC=GER&competitorName=Test%20User&secret=KFJHKH265kJH724KJHKH2374567&deviceUuid=00000000-1111-2222-3333-444444444444"</td>
    </tr>
</table>
<div style="height: 1em;"></div>
<a href="index.html">Back to Web Service Overview</a> 
</body>
</html>
